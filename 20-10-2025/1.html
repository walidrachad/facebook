<!--
Modern Tech News Post Template v3 (Portrait 1080x1350)
- Dark style + blue accent (#0ea5e9), Arabic RTL.
- GPT agent now also generates background images.
- The agent must provide bgImage as an online URL (not local path).
-->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Modern Tech Post v3</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --brand-name: "YourBrand";
        --brand-handle: "@your_handle";
        --brand-primary: #00142e;
        --brand-secondary: #1f2937;
        --radius: 24px;
        --card-w: 1080px;
        --card-h: 1350px;
        --pad: 44px;
        --shadow: 0 24px 80px rgba(0, 0, 0, 0.28);
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        background: #bb0a0a;
        color: #00142e;
        font-family: "Cairo", system-ui, Segoe UI, Roboto, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 20px;
      }
      .board {
        width: var(--card-w);
        height: var(--card-h);
        border-radius: var(--radius);
        overflow: hidden;
        position: relative;
        box-shadow: var(--shadow);
        display: grid;
        grid-template-rows: 50% 50%;
        background: #697895;
      }
      .media {
        position: relative;
        overflow: hidden;
        background: #111827;
      }
      .media::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
            1200px 700px at 85% 15%,
            rgba(14, 165, 233, 0.18),
            transparent 60%
          ),
          radial-gradient(
            1000px 600px at 10% 90%,
            rgba(14, 165, 233, 0.12),
            transparent 60%
          );
      }
      .bg {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        filter: saturate(110%) contrast(108%);
      }
      .badge {
        position: absolute;
        top: 18px;
        left: 18px;
        background: rgba(14, 165, 233, 0.1);
        border: 1px solid rgba(14, 165, 233, 0.6);
        color: #e6f9ff;
        padding: 8px 14px;
        border-radius: 14px;
        font-weight: 800;
        backdrop-filter: blur(6px);
      }
      .panel {
        position: relative;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0.02)
        );
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        padding: calc(var(--pad) - 6px) var(--pad);
      }
      .divider {
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        margin: 12px 0 22px;
      }
      h1 {
        margin: 0 0 6px;
        font-size: 70px;
        line-height: 1.08;
        color: #f8fafc;
        font-weight: 800;
      }
      .sub {
        margin: 0 0 12px;
        color: #cbd5e1;
        font-size: 24px;
        font-weight: 600;
      }
      .lines {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin: 12px 0 18px;
      }
      .line {
        font-size: 34px;
        font-weight: 700;
        color: #e2e8f0;
      }
      .hl {
        color: var(--brand-primary);
      }
      .meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 18px;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        color: #94a3b8;
      }
      .brand img {
        width: 54px;
        height: 54px;
        object-fit: contain;
        filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.35));
      }
      .handle {
        font-weight: 800;
      }
      .cta {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        background: var(--brand-primary);
        color: #06202a;
        font-weight: 900;
        border: none;
        padding: 14px 20px;
        border-radius: 14px;
        box-shadow: 0 14px 44px rgba(14, 165, 233, 0.35);
      }
      .ribbon {
        position: absolute;
        inset: auto 0 0 0;
        height: 12px;
        background: linear-gradient(90deg, var(--brand-primary), #00142e);
      }
    </style>
  </head>
  <body class="board">
    <main class="board" id="board">
      <div class="media">
        <div class="bg" id="bgImage"></div>
        <div class="badge" id="badge">خبر تقني</div>
      </div>
      <section class="panel" style="background-color: #00142e">
        <h1 id="title">عنوان [[جذاب]] وواضح</h1>
        <div class="sub" id="subtitle">وصف قصير يشرح الفكرة الرئيسية</div>
        <div class="divider"></div>
        <div class="lines" id="lines">
          <div class="line">• سطر توضيحي [[مهم]]</div>
          <div class="line">• سطر ثانٍ مختصر</div>
          <div class="line">• سطر ثالث يكمّل المعنى</div>
        </div>
        <div class="meta">
          <button class="cta" id="cta">تابعني للمزيد</button>
          <div class="brand">
            <img id="logo" alt="logo" src="./custom_logo.png" />
            <div>
              <div style="font-weight: 900" id="brandName">YourBrand</div>
              <div class="handle" id="brandHandle">@your_handle</div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script id="postData" type="application/json">
      {
        "variant": "news",
        "badge": "إنجاز تاريخي",
        "title": "المغرب يحقق [[أول فوز عربي]] بكأس العالم تحت 20 سنة!",
        "subtitle": "المنتخب المغربي يهزم [[الأرجنتين]] ويتوج باللقب العالمي للشباب.",
        "body": [
          "أسود الأطلس يصنعون المجد من جديد ⚽️",
          "فوز مثير في النهائي أمام الأرجنتين 🇲🇦🔥",
          "المغرب أول دولة عربية تحقق هذا الإنجاز"
        ],
        "cta": "تابعنا للمزيد من الأخبار الرياضية والتقنية!",
        "hashtags": [
          "#المغرب",
          "#كأس_العالم",
          "#كرة_القدم",
          "#أبطال",
          "#تاريخي",
          "#U20"
        ],
        "accentColor": "#e11d48",
        "bgImage": "1.webp",
        "topic": "sports"
      }
    </script>

    <script>
      function highlightMarkup(str) {
        if (!str) return "";
        return str.replace(/\[\[(.+?)\]\]/g, '<span class="hl">$1<\/span>');
      }
      (function applyData() {
        try {
          const data = JSON.parse(
            document.getElementById("postData").textContent.trim()
          );
          const $ = (id) => document.getElementById(id);
          const BRAND_NAME = getComputedStyle(document.documentElement)
            .getPropertyValue("--brand-name")
            .replaceAll('"', "")
            .trim();
          const BRAND_HANDLE = getComputedStyle(document.documentElement)
            .getPropertyValue("--brand-handle")
            .replaceAll('"', "")
            .trim();
          const accent =
            data.accentColor ||
            getComputedStyle(document.documentElement)
              .getPropertyValue("--brand-primary")
              .trim();
          document.documentElement.style.setProperty("--brand-primary", accent);
          $("brandName").textContent = "Rachad Tech";
          $("brandHandle").textContent = "@rachad_tech_news";
          document.body.className = "variant-" + (data.variant || "news");
          $("badge").textContent =
            data.badge || (data.variant === "alert" ? "تحذير" : "خبر تقني");
          $("title").innerHTML = highlightMarkup(data.title || "");
          $("subtitle").innerHTML = highlightMarkup(data.subtitle || "");
          $("cta").textContent = data.cta || "تابعني للمزيد";
          const lines = Array.isArray(data.body) ? data.body : [];
          const container = $("lines");
          container.innerHTML = "";
          lines.forEach((t) => {
            const div = document.createElement("div");
            div.className = "line";
            div.innerHTML = highlightMarkup(t);
            container.appendChild(div);
          });
          if (data.bgImage && data.bgImage.startsWith("http")) {
            $("bgImage").style.backgroundImage = `url(${data.bgImage})`;
          } else {
            $("bgImage").style.backgroundImage = "url(1.webp)";
          }
        } catch (e) {
          console.error(e);
        }
      })();
    </script>
  </body>
</html>
